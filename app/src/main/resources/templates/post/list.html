<!DOCTYPE html>
<html>
<head>
  <meta charset='UTF-8'>
  <title>ShowPet 게시글</title>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="/js/header.js"></script>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Rammetto+One%3A400"/>
  <link rel="stylesheet"
        href="https://fonts.googleapis.com/css?family=Source+Sans+Pro%3A400%2C700"/>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=ABeeZee%3A400"/>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Poppins%3A700"/>
  <link rel="stylesheet" th:href="@{/css/header.css}"/>
  <link rel="stylesheet" th:href="@{/css/index.css}"/>
  <link rel="stylesheet" th:href="@{/css/modal.css}"/>
  <link rel="stylesheet" th:href="@{/css/list.css}"/>

</head>

<body>

<div data-th-replace="header :: header"></div>

<span>
<h1>모아보기</h1>
</span>
<div style='margin:5px;'>
  <button class="button" id="allButton" type="button" onclick="location.href='/post/list'">전체보기</button>
  <button class="button" id="dogButton" type="button" onclick="location.href='/post/listDog'">강아지</button>
  <button class="button" id="catButton" type="button" onclick="location.href='/post/listCat'">고양이</button>
  <button class="button" id="birdButton" type="button" onclick="location.href='/post/listBird'">새</button>
  <button class="button" id="etcButton" type="button" onclick="location.href='/post/listEtc'">기타</button>
</div>

<div class="square-box">
  <div data-th-each="post : ${list}">
    <!-- 검색 키워드 필터링 -->
    <div th:if="${searchKeyword == null or #strings.containsIgnoreCase(post.title, searchKeyword)}">

      <!-- attachedFiles가 null이 아닌 경우에만 내용 렌더링 -->
      <div
          data-th-if="${post != null and post.attachedFiles != null and post.attachedFiles.size() > 0}">

        <!-- 첫 번째 파일만 선택하여 표시 -->
        <div class="image-thumbnail" th:with="firstFile=${post.attachedFiles[0]}">
          <a data-th-href="@{'/post/detail/' + ${post.category} + '/' + ${post.id}}">
            <img
                th:src="${firstFile != null} ? 'https://kr.object.ncloudstorage.com/bitcamp-nc7-bucket-16/post/' + ${firstFile.filePath} : ''">
          </a>
        </div>
      </div>

    </div>
  </div>
</div>

<script>
  // 모든 버튼 요소 가져오기
  const allButton = document.getElementById('allButton');
  const dogButton = document.getElementById('dogButton');
  const catButton = document.getElementById('catButton');
  const birdButton = document.getElementById('birdButton');
  const etcButton = document.getElementById('etcButton');

  // 각 버튼에 대한 클릭 이벤트 리스너 추가
  allButton.addEventListener('click', () => {
    // 선택한 버튼에 클래스 추가
    allButton.classList.add('selected-button');

    // 다른 버튼에서 클래스 제거
    dogButton.classList.remove('selected-button');
    catButton.classList.remove('selected-button');
    birdButton.classList.remove('selected-button');
    etcButton.classList.remove('selected-button');
  });

  dogButton.addEventListener('click', () => {
    // 선택한 버튼에 클래스 추가
    dogButton.classList.add('selected-button');

    // 다른 버튼에서 클래스 제거
    allButton.classList.remove('selected-button');
    catButton.classList.remove('selected-button');
    birdButton.classList.remove('selected-button');
    etcButton.classList.remove('selected-button');
  });

  catButton.addEventListener('click', () => {
    // 선택한 버튼에 클래스 추가
    catButton.classList.add('selected-button');

    // 다른 버튼에서 클래스 제거
    allButton.classList.remove('selected-button');
    dogButton.classList.remove('selected-button');
    birdButton.classList.remove('selected-button');
    etcButton.classList.remove('selected-button');
  });

  birdButton.addEventListener('click', () => {
    // 선택한 버튼에 클래스 추가
    birdButton.classList.add('selected-button');

    // 다른 버튼에서 클래스 제거
    allButton.classList.remove('selected-button');
    dogButton.classList.remove('selected-button');
    catButton.classList.remove('selected-button');
    etcButton.classList.remove('selected-button');
  });

  etcButton.addEventListener('click', () => {
    // 선택한 버튼에 클래스 추가
    etcButton.classList.add('selected-button');

    // 다른 버튼에서 클래스 제거
    allButton.classList.remove('selected-button');
    dogButton.classList.remove('selected-button');
    catButton.classList.remove('selected-button');
    birdButton.classList.remove('selected-button');
  });
</script>


</body>
</html>
